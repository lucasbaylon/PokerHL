<h3
    class="text-4xl font-bold md:text-5xl text-gray-800 dark:text-gray-300 animate-appear opacity-0 transition-colors duration-500 m-0">
    Paramètres</h3>
<p
    class="text-gray-500 dark:text-gray-400 text-xl mt-2 mb-0 text-left animate-appear opacity-0 transition-colors duration-500">
    Ajustez les
    paramètres selon vos préférences.</p>
<div class="flex">
    <div class="w-1/2 min-w-[400px] mr-6">
        <div
            class="mx-auto mt-10 p-5 rounded-lg shadow-lg bg-white dark:bg-secondary-dark-bg animate-appear opacity-0 animation-delay-50 transition-colors duration-500">
            <h4
                class="m-0 mb-4 text-left text-lg font-semibold uppercase text-gray-800 dark:text-gray-300 tracking-wider transition-colors duration-500">
                Global</h4>
            <div class="flex items-center justify-between w-full mt-4">
                <div
                    class="text-left text-gray-800 dark:text-gray-300 text-lg tracking-wider transition-colors duration-500">
                    Activer le mode sombre</div>
                <p-inputSwitch styleClass="custom-inputSwitch" [(ngModel)]="darkMode"
                    (onChange)="toggleDarkMode()"></p-inputSwitch>
            </div>
            <div class="flex items-center justify-between w-full mt-4">
                <div
                    class="text-left text-gray-800 dark:text-gray-300 text-lg tracking-wider transition-colors duration-500">
                    Désactiver les particules
                </div>
                <p-inputSwitch styleClass="custom-inputSwitch" [(ngModel)]="showParticules"
                    (onChange)="toggleShowParticules()"></p-inputSwitch>
            </div>
        </div>
        <div
            class="mx-auto mt-10 p-5 rounded-lg shadow-lg bg-white dark:bg-secondary-dark-bg animate-appear opacity-0 animation-delay-150 transition-colors duration-500">
            <h4
                class="m-0 mb-4 text-left text-lg font-semibold uppercase text-gray-800 dark:text-gray-300 tracking-wider transition-colors duration-500">
                Compte
            </h4>
            <div class="flex items-center justify-between w-full mt-4">
                <div class="flex items-center w-full my-1.5">
                    <div class="relative w-24 h-24 rounded-full hover:cursor-pointer overflow-hidden group transition-all duration-300"
                        (click)="avatarInput.click()">
                        @if (authService.getUserAvatar()) {
                        <img [src]="authService.getUserAvatar()"
                            class="w-full h-full object-cover transition-all duration-300" />
                        } @else {
                        <img src="https://imgs.search.brave.com/6Abd5TBbHIoBHK1py-tGSUv7eRH_hf3KVb5Px1DBNMs/rs:fit:860:0:0/g:ce/aHR0cHM6Ly90NC5m/dGNkbi5uZXQvanBn/LzA4LzIzLzkxLzU1/LzM2MF9GXzgyMzkx/NTUzM19PalFLUGtD/TTNzaGRxRmdwWjVz/d01LV3U1cHhnMzls/VS5qcGc"
                            class="w-full h-full object-cover transition-all duration-300" />
                        }
                        <input type="file" #avatarInput (change)="onChangeAvatar($event)" class="hidden">
                        <div
                            class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-300">
                            <i
                                class="fas fa-pencil-alt text-white text-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"></i>
                        </div>
                    </div>
                    <div class="ml-4">
                        <p class="text-lg font-semibold text-gray-800 dark:text-gray-300">
                            @if (authService.getUserDisplayName()) {
                            {{ authService.getUserDisplayName() }}
                            } @else {
                            Nom d'utilisateur
                            }
                        </p>
                    </div>
                </div>
                <div (click)="this.commonService.showModal('change-user-name')"
                    class="inline-flex h-12 items-center justify-center rounded-md bg-gray-800 text-white dark:text-gray-300 hover:bg-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 px-5 text-base font-medium shadow transition-colors duration-500 cursor-pointer">
                    <i class="fa-solid fa-pencil-alt mr-4 h-4 w-4"></i>
                    Modification
                </div>
            </div>
            <div class="flex items-center justify-between w-full mt-4">
                <div
                    class="text-left text-gray-800 dark:text-gray-300 text-lg tracking-wider transition-colors duration-500">
                    Changer votre mot de passe
                </div>
                <div (click)="commonService.redirectTo('change-password')"
                    class="inline-flex h-12 items-center justify-center rounded-md bg-gray-800 text-white dark:text-gray-300 hover:bg-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 px-5 text-base font-medium shadow transition-colors duration-500 cursor-pointer">
                    <i class="fa-solid fa-rotate mr-4 h-4 w-4"></i>
                    Changement
                </div>
            </div>
            <div class="flex items-center justify-between w-full mt-4">
                <div
                    class="text-left text-gray-800 dark:text-gray-300 text-lg tracking-wider transition-colors duration-500">
                    Se déconnecter de
                    votre compte</div>
                <div (click)="authService.signOut()"
                    class="inline-flex h-12 items-center justify-center rounded-md bg-gray-800 text-white dark:text-gray-300 hover:bg-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 px-5 text-base font-medium shadow transition-colors duration-500 cursor-pointer">
                    <i class="fa-solid fa-arrow-right-from-bracket mr-4 h-4 w-4"></i>
                    Déconnexion
                </div>
            </div>
        </div>
    </div>
    <div class="w-1/2 min-w-[400px] ml-6">
        <div
            class="mx-auto mt-10 p-5 rounded-lg shadow-lg bg-white dark:bg-secondary-dark-bg animate-appear opacity-0 animation-delay-100 transition-colors duration-500">
            <h4
                class="m-0 mb-4 text-left text-lg font-semibold uppercase text-gray-800 dark:text-gray-300 tracking-wider transition-colors duration-500">
                Situations
            </h4>
            <div class="flex items-center justify-between w-full mt-4">
                <div
                    class="text-left text-gray-800 dark:text-gray-300 text-lg tracking-wider transition-colors duration-500">
                    Nom de situation multiple auto
                </div>
                <p-inputSwitch styleClass="custom-inputSwitch" [(ngModel)]="autoMultipleSolutionName"
                    (onChange)="updateUserParam('autoMultipleSolutionName', autoMultipleSolutionName)"></p-inputSwitch>
            </div>
            <div class="flex items-center justify-between w-full mt-4">
                <div
                    class="text-left text-gray-800 dark:text-gray-300 text-lg tracking-wider transition-colors duration-500">
                    Importer des situations
                </div>
                <div (click)="fileImportInput.click()"
                    class="inline-flex h-12 items-center justify-center rounded-md bg-gray-800 text-white dark:text-gray-300 hover:bg-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 px-5 text-base font-medium shadow transition-colors duration-500 cursor-pointer">
                    <i class="fa-solid fa-download mr-4 h-4 w-4"></i>
                    Importer
                </div>
                <input type="file" #fileImportInput style="display: none;" (change)="onClickFileImport($event)"
                    multiple>
            </div>
            <div class="flex items-center justify-between w-full mt-4">
                <div
                    class="text-left text-gray-800 dark:text-gray-300 text-lg tracking-wider transition-colors duration-500">
                    Exporter vos situations
                </div>
                <div (click)="onClickFileExport()"
                    class="inline-flex h-12 items-center justify-center rounded-md bg-gray-800 text-white dark:text-gray-300 hover:bg-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 px-5 text-base font-medium shadow transition-colors duration-500 cursor-pointer">
                    <i class="fa-solid fa-upload mr-4 h-4 w-4"></i>
                    Exporter
                </div>
            </div>
        </div>
        <div
            class="mx-auto mt-10 p-5 rounded-lg shadow-lg bg-white dark:bg-secondary-dark-bg animate-appear opacity-0 animation-delay-100 transition-colors duration-500">
            <h4
                class="m-0 mb-4 font-semibold text-left text-lg uppercase text-gray-800 dark:text-gray-300 tracking-wider transition-colors duration-500">
                Entraînement
            </h4>
            <div class="flex items-center justify-between w-full mt-4">
                <div
                    class="text-left text-gray-800 dark:text-gray-300 text-lg tracking-wider transition-colors duration-500">
                    Affichage de la solution lors d'une erreur
                </div>
                <p-inputSwitch styleClass="custom-inputSwitch" [(ngModel)]="displaySolutionOnError"
                    (onChange)="updateUserParam('displaySolution', displaySolutionOnError)"></p-inputSwitch>
            </div>
            <div class="flex items-center justify-between w-full mt-4">
                <div
                    class="text-left text-gray-800 dark:text-gray-300 text-lg tracking-wider transition-colors duration-500">
                    Style des cartes
                </div>
                <p-dropdown [(ngModel)]="cardsStyle" [options]="availableCardsStyles" optionLabel="name"
                    (onChange)="updateUserParam('cardStyle', $event.value.code)"></p-dropdown>
            </div>
            <div class="flex items-center justify-between w-full mt-4">
                <div
                    class="text-left text-gray-800 dark:text-gray-300 text-lg tracking-wider transition-colors duration-500">
                    Couleur du tapis de jeu
                </div>
                <p-dropdown [options]="availablePokerTableColors" [(ngModel)]="pokerTableColor" optionLabel="name"
                    (onChange)="updateUserParam('playmatColor', $event.value.code)" />
            </div>
        </div>
    </div>
</div>

<dialog id="change-user-name" class="dui-modal dui-modal-bottom sm:dui-modal-middle">
    <div class="dui-modal-box text-gray-800 dark:text-gray-300 bg-white dark:bg-secondary-dark-bg">
        <form method="dialog">
            <button
                class="dui-btn dui-btn-sm dui-btn-circle dui-btn-ghost absolute right-2 top-2 outline-none">✕</button>
        </form>
        <h4 class="m-0 mb-4 text-left text-lg font-semibold uppercase text-gray-800 dark:text-gray-300 tracking-wider">
            Modification du nom d'utilisateur
        </h4>
        <input class="my-2 w-full" type="text" placeholder="Entrez votre nouveau nom d'utilisateur" name="newUserName"
            id='newUserName' autocomplete="off" pInputText [(ngModel)]="newUserName" [maxlength]="16" />
        <div class="flex justify-center items-center mt-5">
            <div class="flex h-12 items-center w-fit justify-center rounded-md bg-gray-800 text-white dark:text-gray-300 hover:bg-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 px-6 text-base font-medium shadow transition-colors cursor-pointer"
                (click)="changeUserName()">
                <i class="fa-solid fa-save mr-4 h-4 w-5"></i>
                Enregistrer
            </div>
        </div>
    </div>
</dialog>